<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
<link rel="stylesheet" href="main.css">
</head>
<body>
  <div class="chat">
    <input tabindex="text" class="chat-name" placeholder="Enter your name">
      <div class="chat-messages">
        <div class="chat-message"></div>
      </div>
      <textarea class="chat-textarea" placeholder="Type your message"></textarea>
      <div class="chat-status">Status: <span>Idle</span></div>
  </div>

  <script>
    var source = new EventSource('/events');

    source.onopen(function() {
      this.send("chat", "Hi?");
    });
    console.log(source);
    source.onmessage = function(e) {
      if(data.length){
        //Loop through the results

          var message = document.createElement('div');
          message.setAttribute('class','chat-message');
          message.innerHTML = e.name + ":" + e.message;

          // Apppend
          messagesVar.appendChild(message);
          messagesVar.insertBefore(message, messagesVar.firstChild);
      }
    };
  </script>

</body>
</html>
